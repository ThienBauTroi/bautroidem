import{_ as b,u as S,a as M,s as w,r as a,l as d,T as O,w as I,b as N,o as i,c as n,d as e,e as k,f as E,k as R,t as h,g as T,h as m,i as U,v as V,n as B}from"./index.fa74b716.js";/* empty css            */import{_ as D}from"./Logo.91462b09.js";const F={setup(){const u=S(),s=M(),{infoUser:v}=w(s),o=a(v);if(d.get("USER_INFO"))var p=JSON.parse(d.get("USER_INFO"));if(d.get("USER_INFO"))var f=a(p.email);const l=a(null),r=a(30),C=a(!1),x=a("B\u1EA1n ch\u01B0a nh\u1EADp m\xE3 x\xE1c th\u1EF1c"),c=a(""),_=a(!1),y=O(()=>{const t=setInterval(()=>{--r.value,r.value<0&&(r.value=0,clearInterval(t))},1e3);return r});return I(l,t=>(t=/^[0-9]{1,6}$/.test(t),t?_.value=!1:_.value=!0)),{auth:s,email:f,code:l,messageError:C,messageErrorCode:x,messageConfirmError:c,boolCode:_,closeErrorMessage:()=>c.value=!1,handleSubmit:async()=>{try{if(l.value!==null){let t={code:l.value};if(!await $axios.post("/user/verified/email",t,{headers:{Authorization:`Bearer ${o.value.token}`}}))return;s.logIn(o.value),d.remove("USER_INFO"),u.go({path:"/"})}}catch(t){c.value="",(t==="email-verified"||t==="referral-code-not-found"||t==="user-not-found"||t==="code-not-verify")&&(c.value=t),console.log(t)}},currentUserInfo:o,secondsCownDown:r,handleSendOtp:async()=>{try{if(!await $axios.get("/user/verify/email",{headers:{Authorization:`Bearer ${o.value.token}`},params:{email_user:f.value}}))return;r.value=30;const g=setInterval(()=>{--r.value,r.value<0&&(r.value=0,clearInterval(g))},1e3);return r}catch(t){console.log(t)}},listenTimer:y}}},z={class:"confirm-otp-container"},q={class:"confirm-otp-wrapper"},A={class:"confirm-otp-navbar"},G=e("img",{src:D},null,-1),J={class:"confirm-otp-content"},Q={class:"confirm-otp-form-input"},X={class:"confirm-otp-form-login"},j={class:"confirm-otp-header"},H=e("div",{class:"confirm-otp-header-title"},"X\xE1c th\u1EF1c email",-1),K={class:"confirm-otp-header-sub-title"},L={style:{color:"#f35b04"}},P={class:"confirm-otp-form-content"},W={key:0,class:"confirm-otp-alert-error"},Y=e("p",{class:"confirm-otp-alert-error-title"},"T\xE0i kho\u1EA3n kh\xF4ng t\u1ED3n t\u1EA1i.",-1),Z={key:1,class:"confirm-otp-alert-error"},$=e("p",{class:"confirm-otp-alert-error-title"},"Email \u0111\xE3 x\xE1c th\u1EF1c.",-1),oo={key:2,class:"confirm-otp-alert-error"},eo=e("p",{class:"confirm-otp-alert-error-title"},"M\xE3 x\xE1c th\u1EF1c \u0111\xE3 h\u1EBFt th\u1EDDi h\u1EA1n.",-1),ro={key:3,class:"confirm-otp-alert-error"},to=e("p",{class:"confirm-otp-alert-error-title"},"M\xE3 x\xE1c th\u1EF1c kh\xF4ng \u0111\xFAng.",-1),so=e("label",{class:"confirm-otp-form-label"},"M\xE3 x\xE1c th\u1EF1c",-1),io={class:"confirm-otp-form-item"},no={class:"confirm-otp-form-el"},ao={key:0,class:"confirm-otp-form-el-error"},lo={key:0,class:"confirm-otp-timer"},co=e("span",{class:"confirm-otp-timer-title"},"Ch\u01B0a nh\u1EADn \u0111\u01B0\u1EE3c email?",-1),mo={key:0,class:"confirm-otp-timer-second"},fo={class:"confirm-otp-form-item-submit"},_o=e("button",null,"G\u1EEDi",-1),ho=e("button",{class:"confirm-otp-return"},"Quay l\u1EA1i",-1);function uo(u,s,v,o,p,f){const l=N("router-link");return i(),n("div",z,[e("div",q,[e("div",A,[k(l,{to:"/",class:"confirm-otp-navbar-logo"},{default:E(()=>[G]),_:1})]),e("div",J,[e("div",Q,[e("div",X,[e("div",j,[H,e("div",K,[R(" Ch\xFAng t\xF4i \u0111\xE3 g\u1EEDi m\xE3 qua email "),e("span",L,h(o.email),1)])]),e("form",{class:"confirm-otp-form",method:"post",onSubmit:s[6]||(s[6]=T((...r)=>o.handleSubmit&&o.handleSubmit(...r),["prevent"]))},[e("div",P,[o.messageConfirmError==="user-not-found"?(i(),n("div",W,[Y,e("i",{onClick:s[0]||(s[0]=(...r)=>o.closeErrorMessage&&o.closeErrorMessage(...r)),class:"fa-solid fa-xmark confirm-otp-alert-close"})])):o.messageConfirmError==="email-verified"?(i(),n("div",Z,[$,e("i",{onClick:s[1]||(s[1]=(...r)=>o.closeErrorMessage&&o.closeErrorMessage(...r)),class:"fa-solid fa-xmark confirm-otp-alert-close"})])):o.messageConfirmError==="request-time-exist"?(i(),n("div",oo,[eo,e("i",{onClick:s[2]||(s[2]=(...r)=>o.closeErrorMessage&&o.closeErrorMessage(...r)),class:"fa-solid fa-xmark confirm-otp-alert-close"})])):o.messageConfirmError==="code-not-verify"?(i(),n("div",ro,[to,e("i",{onClick:s[3]||(s[3]=(...r)=>o.closeErrorMessage&&o.closeErrorMessage(...r)),class:"fa-solid fa-xmark confirm-otp-alert-close"})])):m("",!0),so,e("div",io,[e("div",no,[U(e("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>o.code=r),class:B([{error:o.boolCode},"confirm-otp-form-el-item"]),placeholder:"Vui l\xF2ng nh\u1EADp m\xE3 x\xE1c th\u1EF1c 6 ch\u1EEF s\u1ED1",autocomplete:"off"},null,2),[[V,o.code,void 0,{trim:!0}]])]),o.code==""?(i(),n("div",ao,h(o.messageErrorCode),1)):m("",!0)])]),o.email?(i(),n("div",lo,[co,o.secondsCownDown>0?(i(),n("span",mo,"Vui l\xF2ng ch\u1EDD "+h(o.listenTimer)+"s ",1)):m("",!0),o.secondsCownDown<=0?(i(),n("span",{key:1,class:"confirm-otp-timer-reload",onClick:s[5]||(s[5]=(...r)=>o.handleSendOtp&&o.handleSendOtp(...r))},"G\u1EEDi l\u1EA1i ")):m("",!0)])):m("",!0),e("div",fo,[_o,k(l,{to:"/login"},{default:E(()=>[ho]),_:1})])],32)])])])])])}const xo=b(F,[["render",uo]]);export{xo as default};
